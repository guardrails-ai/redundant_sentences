## Overview

| Developed by | Guardrails AI |
| --- | --- |
| Date of development | Feb 15, 2024 |
| Validator type | Chatbots, QA |
| Blog | - |
| License | Apache 2 |
| Input/Output | Output |

## Description

This validator removes redundant sentences from an LLM response, resulting in a response that is more concise.

## Requirements

* Dependencies: `thefuzz`

## Installation

```bash
guardrails hub install hub://guardrails/redundant_sentences
```

## Usage Examples

### Validating string output via Python

In this example, we apply the validator to a string output generated by an LLM.

```python
# Import Guard and Validator
from guardrails.hub import RedundantSentences
from guardrails import Guard

# Use the Guard with the validator
guard = Guard().use(RedundantSentences, on_fail="exception")

# Test passing response
guard.validate(
    """
    Director Denis Villeneuve's Dune is a visually stunning and epic adaptation of the classic science fiction novel.
    It is reminiscent of the original Star Wars trilogy, with its grand scale and epic storytelling.
    """
)

try:
    # Test failing response
    guard.validate(
        """
        OpenAI just released their latest language model, GPT-3. It is the most powerful language model to date. 
        Also, it's the most powerful language model to date.
        """
    )
except Exception as e:
    print(e)
```
Output:
```console
Validation failed for field with errors: The summary 
Summary: 
        OpenAI just released their latest language model, GPT-3. It is the most powerful language model to date. 
        Also, it's the most powerful language model to date.
        
 has sentences
Also, it's the most powerful language model to date.
 that are similar to other sentences.
```

## API Reference

**`__init__(self, threshold=70, on_fail="noop")`**
<ul>

Initializes a new instance of the Validator class.

**Parameters:**

- **`threshold`** _(int):_ The threshold used for matching redundancy. Defaults to 70.
- **`on_fail`** *(str, Callable):* The policy to enact when a validator fails. If `str`, must be one of `reask`, `fix`, `filter`, `refrain`, `noop`, `exception` or `fix_reask`. Otherwise, must be a function that is called when the validator fails.

</ul>

<br>

**`__call__(self, value, metadata={}) â†’ ValidationResult`**

<ul>

Validates the given `value` using the rules defined in this validator, relying on the `metadata` provided to customize the validation process. This method is automatically invoked by `guard.parse(...)`, ensuring the validation logic is applied to the input data.

Note:

1. This method should not be called directly by the user. Instead, invoke `guard.parse(...)` where this method will be called internally for each associated Validator.
2. When invoking `guard.parse(...)`, ensure to pass the appropriate `metadata` dictionary that includes keys and values required by this validator. If `guard` is associated with multiple validators, combine all necessary metadata into a single dictionary.

**Parameters:**

- **`value`** *(Any):* The input value to validate.
- **`metadata`** *(dict):* A dictionary containing metadata required for validation. No additional metadata keys are needed for this validator.

</ul>
